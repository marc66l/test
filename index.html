<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Szavazz a 12.B-re!</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto:wght@400&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
/* FIX H√ÅTT√âR R√âTEG */
.background-layer {
position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('hatter.png');
background-size: cover; background-position: center center; background-repeat: no-repeat;
}

body, html {
margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden;
font-family: 'Roboto', sans-serif; display: flex; justify-content: center; align-items: center;
}

/* Easter Egg √ºzenet */
#tap-message {
position: fixed; top: 20%; background: rgba(255, 0, 0, 0.9); color: white; padding: 12px 25px;
border-radius: 50px; display: none; z-index: 2000; font-weight: bold; pointer-events: none;
box-shadow: 0 5px 15px rgba(0,0,0,0.3); border: 2px solid white;
}

.container {
width: 85%; max-width: 400px; text-align: center; background: rgba(0, 0, 0, 0.8);
padding: 30px 20px; border-radius: 30px; border: 2px solid #ffd700;
box-shadow: 0 10px 30px rgba(0,0,0,0.5); max-height: 90vh; overflow-y: auto; position: relative; z-index: 1;
}

h1 { font-family: 'Montserrat', sans-serif; font-size: 32px; margin-bottom: 5px; color: #ffd700; text-transform: uppercase; }
.motto { font-style: italic; margin-bottom: 30px; display: block; font-size: 14px; opacity: 0.9; color: white; }

@keyframes pulse {
0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.4); }
70% { transform: scale(1.02); box-shadow: 0 0 0 15px rgba(255, 215, 0, 0); }
100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
}

.btn {
display: flex; align-items: center; justify-content: center; text-decoration: none; color: white;
font-weight: bold; padding: 16px; margin-bottom: 15px; border-radius: 15px; font-size: 18px;
transition: all 0.3s ease; box-sizing: border-box; cursor: pointer; border: none; width: 100%; animation: pulse 2s infinite;
}

.btn-insta { background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); }
.btn-wish { background-color: #27ae60; animation-delay: 0.5s; }
.btn-video-menu { background-color: #f39c12; animation-delay: 0.3s; }

#wish-form-container { display: none; margin-top: 20px; background: white; padding: 20px; border-radius: 15px; color: #333; animation: slideIn 0.4s ease-out; }
@keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

textarea { width: 100%; border: 1px solid #ddd; border-radius: 10px; padding: 12px; box-sizing: border-box; font-family: inherit; margin-bottom: 12px; resize: none; font-size: 15px; }
.submit-btn { background-color: #2980b9; color: white; border: none; padding: 12px; border-radius: 10px; width: 100%; font-weight: bold; cursor: pointer; }

/* OVERLAY ST√çLUSOK (VIDE√ì, MEN√ú, √úZENETEK) */
#video-overlay, #video-menu-overlay, #success-overlay, #info-overlay {
display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
background: rgba(0,0,0,0.95); z-index: 1000; justify-content: center; align-items: center; flex-direction: column; text-align: center;
}

.menu-card, .info-card, .success-card {
background: white; padding: 25px; border-radius: 25px; width: 85%; max-width: 350px;
box-shadow: 0 20px 40px rgba(0,0,0,0.5); animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* Vide√≥ iframe kont√©ner */
#video-container { width: 95%; max-width: 800px; height: 60vh; display: flex; justify-content: center; }
iframe { width: 100%; height: 100%; border: 3px solid #ffd700; border-radius: 15px; background: black; }

/* Sikeres √ºzenet specifikus */
.success-card { border-top: 8px solid #27ae60; }
.success-card h2 { color: #27ae60; margin-top: 0; }

/* Inf√≥ √ºzenet specifikus (Hopp√°) */
.info-card { border-top: 8px solid #f39c12; }
.info-card h2 { color: #f39c12; margin-top: 0; }
.info-card p { font-weight: bold; line-height: 1.5; color: #333; }

@keyframes popIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
</style>
</head>
<body>

<div class="background-layer" onclick="handleBgClick()"></div>
<div id="tap-message">Ne b√∂k√∂dj, f√°j! üò†</div>

<div class="container">
<h1>CSAK A 12.B!</h1>
<span class="motto">V√°laszd a j√∂v≈ët, v√°laszd a showmant!</span>

<button class="btn btn-video-menu" onclick="document.getElementById('video-menu-overlay').style.display='flex'">
üé¨ Vide√≥k
</button>

<a href="instagram://user?username=david_a_showman" id="insta-link" class="btn btn-insta">
üì∏ Ne maradj le semmir≈ël!
</a>

<button class="btn btn-wish" onclick="toggleForm()">
‚úâÔ∏è K√ºldj egy k√≠v√°ns√°got!
</button>

<div id="wish-form-container">
<form id="my-form">
<p style="margin: 0 0 10px 0; font-weight: bold; font-size: 18px;">Mit int√©zz√ºnk el?</p>
<textarea name="message" id="message-text" rows="4" placeholder="Oszt√°ly, tant√°rgy, tan√°r neve, h√°nyadik √≥ra stb..." required></textarea>
<button type="submit" id="submit-button" class="submit-btn">Int√©zd el!</button>
</form>
</div>
</div>

<div id="video-menu-overlay">
    <div class="menu-card">
        <h2 style="margin-top:0; color:#333;">V√°lassz vide√≥t!</h2>
        <button class="submit-btn" style="margin-bottom:10px; background:#e67e22;" onclick="playDriveVideo('1Wwo85FWTN5yEhYxTlJteokDdqsqMzTZS')">1. √ñtlet sz√ºlet√©se</button>
        
        <button class="submit-btn" style="margin-bottom:10px; background:#95a5a6;" onclick="showInfo()">2. Kamp√°ny indul</button>
        <button class="submit-btn" style="margin-bottom:10px; background:#95a5a6;" onclick="showInfo()">3. Vide√≥</button>
        <button class="submit-btn" style="margin-bottom:10px; background:#95a5a6;" onclick="showInfo()">4. Vide√≥</button>
        <button class="submit-btn" style="margin-bottom:10px; background:#95a5a6;" onclick="showInfo()">5. Vide√≥</button>
        <button class="submit-btn" style="margin-bottom:10px; background:#95a5a6;" onclick="showInfo()">6. Vide√≥</button>
        <button class="submit-btn" style="margin-bottom:10px; background:#34495e;" onclick="showInfo()">7. Hamarosan...</button>
        
        <button onclick="document.getElementById('video-menu-overlay').style.display='none'" class="submit-btn" style="background:#7f8c8d; margin-top:10px;">Bez√°r√°s</button>
    </div>
</div>

<div id="info-overlay">
    <div class="info-card">
        <h2>üòâ HOPP√Å!</h2>
        <p>L√°tom m√°r k√≠v√°ncsi vagy...<br>Hamarosan √©rkezik!</p>
        <button onclick="document.getElementById('info-overlay').style.display='none'" class="submit-btn" style="background:#f39c12; margin-top:10px;">Rendben</button>
    </div>
</div>

<div id="video-overlay">
    <div id="video-container"></div>
    <button onclick="closeVideo()" class="submit-btn" style="width:200px; background:#ffd700; color:black; margin-top:20px;">VISSZA</button>
</div>

<div id="success-overlay">
<div class="success-card">
<h2>‚úì VETT√úK!</h2>
<p>√úzenet c√©lba √©rt.<br>A 12.B m√°r int√©zkedik!</p>
<button onclick="closeModal()" class="submit-btn" style="background:#27ae60; margin-top:10px;">Vissza</button>
</div>
</div>

<script>
const scriptURL = 'https://script.google.com/macros/s/AKfycbzk5LEtFjBApTaQlK66QJlNPIk69Og36snw9B6iSekoKF0VNinIe0Yi2-cZLyH7lG3Ikw/exec';

// VIDE√ì KEZEL√âS (IFRAME MEGOLD√ÅS)
function playDriveVideo(id) {
    const overlay = document.getElementById('video-overlay');
    const container = document.getElementById('video-container');
    // Iframe beilleszt√©se preview m√≥dban - ez kezeli a nagy f√°jlokat is
    container.innerHTML = `<iframe src="https://drive.google.com/file/d/${id}/preview" allow="autoplay; fullscreen" allowfullscreen></iframe>`;
    overlay.style.display = 'flex';
}

function closeVideo() {
    const overlay = document.getElementById('video-overlay');
    const container = document.getElementById('video-container');
    container.innerHTML = ''; // T√∂rli az iframe-et (meg√°ll√≠tja a vide√≥t)
    overlay.style.display = 'none';
}

// √öJ INFO ABLAK KEZEL√âSE
function showInfo() {
    document.getElementById('info-overlay').style.display = 'flex';
}

let bgClicks = 0;
function handleBgClick() {
bgClicks++;
if (bgClicks >= 10) {
const msg = document.getElementById('tap-message');
msg.style.display = 'block';
bgClicks = 0;
setTimeout(() => { msg.style.display = 'none'; }, 2000);
}
}

document.getElementById('insta-link').onclick = function(e) {
var start = Date.now();
setTimeout(function() {
if (Date.now() - start < 1500) {
window.location.href = "https://www.instagram.com/david_a_showman/";
}
}, 500);
};

function toggleForm() {
var formDiv = document.getElementById("wish-form-container");
formDiv.style.display = (formDiv.style.display === "block") ? "none" : "block";
}

function closeModal() {
document.getElementById("success-overlay").style.display = "none";
}

const form = document.getElementById("my-form");
form.addEventListener("submit", e => {
e.preventDefault();
var btn = document.getElementById("submit-button");
btn.disabled = true;
btn.innerText = "K√ºld√©s...";

fetch(scriptURL, { method: 'POST', mode: 'no-cors', body: new FormData(form) })
.then(() => {
confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 }, colors: ['#ffd700', '#ffffff', '#27ae60'] });
document.getElementById("success-overlay").style.display = "flex";
form.reset();
toggleForm();
btn.disabled = false;
btn.innerText = "Int√©zd el!";
})
.catch(error => {
console.error('Hiba!', error);
alert("Hiba t√∂rt√©nt a k√ºld√©s sor√°n!");
btn.disabled = false;
btn.innerText = "Int√©zd el!";
});
});
</script>
</body>
</html>